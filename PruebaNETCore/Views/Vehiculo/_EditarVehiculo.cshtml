@model Vehiculo
<div class="modal-dialog modal-lg">
    <div class="modal-content fw-bold">
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Editar vehiculo</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form id="form_EditarVehiculo">
            <div class="modal-body row fw-bold">
                <div class="col col-lg-12">
                    <div class="row g-2">
                        <input type="hidden" asp-for="Id" />
                        <input type="hidden" asp-for="Eliminado" />
                        <input type="hidden" asp-for="DireccionImg" />
                        <input type="hidden" asp-for="IdPeriodoKilometraje" />
                        <input type="hidden" asp-for="Estado" />
                        <div class="col-md-6">
                            <label for="patente" class="form-label">Patente</label>
                            <input type="text" class="form-control" 
                                placeholder="Ej. AA1122 o AABB11" asp-for="Patente" />
                        </div>
                        <div class="col-md-6">
                            <label for="marca" class="form-label">Marca</label>
                            <input type="text" class="form-control"
                                   placeholder="Ej. AA1122 o AABB11" asp-for="Marca" />
                        </div>
                        <div class="col-md-6">
                            <label for="modelo" class="form-label">Modelo</label>
                            <input type="text" class="form-control"
                                   placeholder="Ej. AA1122 o AABB11" asp-for="Modelo" />
                        </div>
                        <div class="col col-md-6">
                            <label for="inputMantenimiento" class="form-label">Periodos de mantenimiento</label>
                            <select class="form-select" asp-for="IdPeriodoKilometraje" asp-items="ViewBag.IdPeriodoKilometraje">
                            </select>
                        </div>
                        @*<div class="col-md-6">
                        <label for="formFile" class="form-label">Subir imagen</label>
                        <input class="form-control" type="file" id="formFile">
                        </div>
                        action="@Url.Action("EditarVehiculo")" method="post" id="gridCheck"*@
                        <div class="col-12 mt-4 mb-2">
                            <div class="form-check">
                                <input id="gridCheck" class="form-check-input" type="checkbox" @(Model.Estado?"checked":"")/>
                                <label class="form-check-label" for="gridCheck">
                                    Admitir solicitudes de vehiculo
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="submit" class="btn btn-warning">
                    <i class="fa-sharp fa-pen"></i>
                    Editar vehículo
                </button>
            </div>
        </form>
    </div>
</div>
<script type="text/javascript">
    var check = document.getElementById('gridCheck');
    var inputCheck = document.getElementById('Estado');
    var form = document.getElementById('form_EditarVehiculo');
    check.addEventListener('change', () => {
        if (check.checked) {
            inputCheck.value = "True";
        } else {
            inputCheck.value = "False";
        }
    });

    $('#form_EditarVehiculo').submit(function (e) {
        e.preventDefault();
        var params = new URLSearchParams($(this).serialize());

        var objeto = {};
        for (var pair of params.entries()) {
            var key = pair[0];
            var value = pair[1];
            objeto[key] = value
        }

        console.log(objeto);

        $.ajax({
            url: '/Vehiculo/EditarVehiculo',
            type: 'POST',
            data: objeto,
            success: function (result) {
                location = location.href;
            },
            error: function (xhr, error) {
                console.log(error);
            }
        });
    });
</script>